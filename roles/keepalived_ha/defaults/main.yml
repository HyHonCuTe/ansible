---
# defaults file for keepalived_ha

# VRRP configuration
keepalived_virtual_router_id: 51
keepalived_virtual_ip: 192.168.1.100
keepalived_interface: "{{ ansible_default_ipv4.interface }}"

# State and priority (overridden in inventory)
keepalived_state: BACKUP
keepalived_priority: 90

# VRRP settings
keepalived_advert_int: 1  # Advertisement interval in seconds
keepalived_auth_type: PASS
keepalived_auth_pass: "HA_SECRET_2025"

# Health check script
keepalived_check_script: "/usr/local/bin/check_haproxy.sh"
keepalived_check_interval: 2
keepalived_check_weight: -10

# Email notifications (optional)
keepalived_enable_email: false
keepalived_email_from: "keepalived@example.com"
keepalived_smtp_server: "127.0.0.1"
keepalived_smtp_connect_timeout: 30
keepalived_notification_email:
  - "admin@example.com"

# Firewall configuration
firewall_enabled: true
keepalived_firewall_rich_rules:
  - 'rule protocol value="vrrp" accept'
