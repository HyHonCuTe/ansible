---
# Grafana Main Tasks
# Author: HyHonCuTe
# Date: 2025-11-15

- name: "Display installation banner"
  debug:
    msg: |
      â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
      â•‘   ğŸš€ Grafana Installation Starting            â•‘
      â•‘   Version: {{ grafana_version }}              â•‘
      â•‘   Time: {{ ansible_date_time.iso8601 }}       â•‘
      â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

- name: "Include installation tasks"
  include_tasks: install.yml
  tags:
    - install
    - grafana_install

- name: "Include configuration tasks"
  include_tasks: configure.yml
  tags:
    - configure
    - grafana_config

- name: "Include datasource configuration"
  include_tasks: datasources.yml
  tags:
    - datasources
    - grafana_datasources

- name: "Include plugins installation"
  include_tasks: plugins.yml
  tags:
    - plugins
    - grafana_plugins

- name: "Include dashboard provisioning"
  include_tasks: dashboards.yml
  tags:
    - dashboards
    - grafana_dashboards

- name: "Display completion message"
  debug:
    msg: |
      â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
      â•‘   âœ… Grafana Installation Completed!          â•‘
      â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      
      ğŸŒ Web Interface: {{ grafana_root_url }}
      ğŸ‘¤ Username: {{ grafana_admin_user }}
      ğŸ” Password: {{ grafana_admin_password }}
      
      ğŸ“Š Data Sources:
      {% for ds in grafana_datasources %}
      - {{ ds.name }} ({{ ds.type }})
      {% endfor %}
      
      âš ï¸  IMPORTANT: Change default password after first login!
