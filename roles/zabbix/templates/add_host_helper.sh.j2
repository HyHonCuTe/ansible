#!/bin/bash
# Zabbix Host Management Helper Script
# Generated by Ansible on {{ ansible_date_time.iso8601 }}
# Author: HyHonCuTe

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘   Zabbix Host Management Helper                â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "ğŸ“– Manual steps to add hosts in Web UI:"
echo "   URL: http://{{ ansible_default_ipv4.address }}/zabbix"
echo ""
echo "ğŸ–¥ï¸  Agents to add:"
{% for host in groups['zabbix_agents'] | default([]) %}
echo "   - Hostname: {{ host }}"
echo "     IP: {{ hostvars[host]['ansible_host'] | default('N/A') }}"
echo "     Template: Linux by Zabbix agent"
echo ""
{% endfor %}

{% if groups['network_devices'] | default([]) | length > 0 %}
echo "ğŸŒ Network devices (SNMP):"
{% for host in groups['network_devices'] | default([]) %}
echo "   - Hostname: {{ host }}"
echo "     IP: {{ hostvars[host]['ansible_host'] | default('N/A') }}"
echo "     SNMP Community: {{ hostvars[host]['snmp_community'] | default('public') }}"
echo "     Template: Generic SNMP device"
echo ""
{% endfor %}
{% endif %}

echo "ğŸ’¡ TIPS:"
echo "   - Wait 5-10 minutes after adding hosts for data"
echo "   - Check: Configuration â†’ Hosts â†’ host â†’ Latest data"
echo "   - Create dashboards: Monitoring â†’ Dashboards"